---
title: 3456.恭介的法则
categories:
  - JZOJ
  - JZ高中OJ
tags:
  - OJ
---

Time Limits: **1000 ms**  Memory Limits: **131072 KB**

## Description

终于，在众亲们的奋斗下，最终boss 恭介被关进了库特设计的密室。正当她们松了一口气时，这个世界却发生了天翻覆地的变化：地面开始下沉，天空开始变成血红色，海水沸腾……一幅世界末日的图景。美鱼从她手中的古籍《若山牧水诗歌集》中发现了原因：白鸟は かなしからずや 空の青 海のあをにも 染まずただよふ 。大（xia）意（shuo）就是狡猾的恭介在创造这个世界的时候就篡改了法则。而这个法则的起源，就是一只生死之间的猫。这个猫被关在一个黑盒子里，盒子里有两个毒气罐，如果有任意一个毒气罐被打开那么猫将会被杀死，法则也能得到纠正。然而外界能控制的仅仅是这两个毒气罐被打开的概率。假设第一个毒气罐被打开的概率为1/x，第二个毒气罐为1/y（x,y 为正整数），那么当两个概率和为1/(n!)时，猫将会被莫名其妙地杀死。现在美鱼想知道，有多少对(x,y)可以让猫被莫名其妙杀死。



## Input

一行，一个正整数n

## Output

一行，满足题意的(x,y)对数。

## Sample Input

```
6
```

## Sample Output

```
135
```

## Data Constraint

对于30%的数据 n<=6

对于60%的数据 n<=50

对于100%的数据 n<=700000

## Code

```cpp
#include<bits/stdc++.h>
using namespace std;
int len=1,n;
long long ans[30000],k=1,x1,x2;
bool b[700002];
int check(int x1)
{
    for(int i=1;i<=len;i++){
    	ans[i]*=x1;
	}
    for(int i=1;i<=len;i++)
    {   
        ans[i+1]+=ans[i]/100000000;
        ans[i]%=100000000;
    }
    while(ans[len+1]>0)
    {
        len++;
        ans[len+1]+=ans[len]/100000000;
        ans[len]%=100000000;
    }
}
int main()
{
    scanf("%d",&n);
    ans[1]=1;
    for(int i=2;i<=n;i++){
		if(!b[i]){   
    	    x1=n,x2=0;
        	while(x1>=i){
        		 x1/=i;
				 x2+=x1;
			}
	        x2=x2*2+1;
    	    if(x2*k>100000000)
        	{
	            check(k);
    	        k=1;
        	}
        	k*=x2;
        	for(int j=i;j<=n;j+=i){
        		b[j]=1; 
			}
    	}
	}
    if(k>1){
    	check(k);
	}
    printf("%lld",ans[len]);
    for(int i=len-1;i>0;i--){
    	printf("%08lld",ans[i]);
	}
}
```

